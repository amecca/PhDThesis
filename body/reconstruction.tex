\chapter{Reconstruction}

Collision events registered by the CMS detector are reconstructed by combining information from the different subdetectors.
This process aims to improve the identification of final state particles and the reconstruction precision of their properties.
The global reconstruction strategy is implemented through the particle-flow (PF) algorithm \cite{ParticleFlow}.
Originally applied in the ALEPH experiment at LEP, this algorithm combines raw data from CMS subsystems to reconstruct physics objects and achieving a comprehensive event reconstruction.
The resulting physics objects include charged and neutral hadrons, photons, electrons, and muons, serving as the starting inputs for all subsequent data analyses.
Additionally, PF candidates are used to construct more advanced objects such as jets and missing transverse energy.

The algorithm relies on precise track reconstruction and clustering techniques that efficiently distinguish between overlapping showers.
A robust linking procedure is used to combine information related to energy deposits associated with a single particle across different sub-detectors.
The PF sequence begins with identifying tracks of charged particles, followed by extrapolating these tracks to compatible calorimeter energy deposits.
To prevent double counting of leptons as individual particles and jet constituents, isolated leptons are excluded from the jet clustering sequence.

Neutral hadrons and photons are identified through \textit{Charged Hadron Subtraction}, which removes the energy deposits that can be linked to tracks from charged hadrons.
The remaining deposits in ECAL and HCAL are attributed to photons and neutral hadrons,
provided that the cluster energies of neutral hadron candidates exceed their track momentum, accounting for detector resolution effects.

The CMS detector's exceptional performance with the PF algorithm is attributed to the high granularity of the electromagnetic calorimeter, hermiticity of the hadron calorimeter, and a large magnetic field integral.

% Primary Vertex
The pp collision vertices in an event are reconstructed by grouping tracks consistent with originating at a common point in the luminous region.
The candidate vertex with the largest value of summed physics-object $p^2_T$ is taken to be the primary pp interaction vertex.
The physics objects are the jets, clustered using the anti-kT jet finding algorithm \cite{Cacciari:2008gp, Cacciari:2011ma} with all the tracks assigned to candidate vertices as inputs,
and the associated missing transverse momentum, taken as the negative vector $p_T$ sum of those jets.

% NOTE: the content of this chapter is taken (and adapted) from the Analysis Note

%% Electrons and muons are considered candidates for the reconstruction of ZZ final states
%% (``signal leptons'') if  their transverse momentum,
%% $\pt^\ell$, is greater than 7(5)~\GeV and their pseudorapidity,
%% $\left| \eta^\ell \right|$, is less than 2.5 (2.4) for electrons (muons).
%% The physics objects and the ZZ candidate selections used in this analysis are those of the $H \rightarrow ZZ \rightarrow 4\ell$~\cite{HiggsAN,HiggsLegacyPaper} analysis, with minor changes. Here, we just report the main features, referring to that material for control plots/tables etc.

\section{Objects}
Electron and Muon identification criteria, energy/momentum calibrations, and efficiency measurements, as well as the Final State Radiation (FSR) recovery, follow the same strategy used in Reference \todo{cite HiggsAN}. % and CMS_AN_2016-442 CMS_AN_2017-342
\subsection{Electrons}
\subsubsection{Electron Reconstruction}
\label{sec:eleReco}
\input{Objects/eleReco}
\subsubsection{Electron Identification}
\label{sec:eleID}
\input{Objects/ele_MVA.tex}
\subsubsection{Electron Impact Parameter Selection}
\label{sec:eleSIP}
\input{Objects/eleIP.tex}
%\subsubsection{Electron Isolation Optimization}
%\label{sec:eleiso}
%\input{Objects/eleIso}
\subsubsection{Electron Energy Calibrations}
\input{Objects/eleCalib}
\subsubsection{Electron Efficiency Measurements}
\label{sec:eleEffMeas}
\input{Objects/eleEffMeas}
\subsection{Muons}
\subsubsection{Muon Reconstruction}
\label{sec:muonReco}
\input{Objects/muonReco}
\subsubsection{Muon Identification}
\label{sec:muonID}
\input{Objects/muonID}
\subsubsection{Muon Isolation}
\label{sec:muoniso}
\input{Objects/muonIso}
 \subsubsection{Muon Impact Parameter Selection}
 \label{sec:muSIP}
 \input{Objects/muIP.tex}
\subsubsection{Muon Energy Calibrations}
\input{Objects/muCalib}
\subsubsection{Muon Efficiency Measurements}
\label{sec:muonEffMeas}
%\textbf{To be done for full 2016 dataset.}
\input{Objects/muonEffMeas}
%\subsection{Lepton Momentum Scale and Resolution validation using \texorpdfstring{\Zllll}{}}
%\input{Objects/scaleresoZ4l}
\subsection{Photons for FSR recovery}
\label{sec:FSRphotons}
\input{Objects/FSR}
\subsection{Jets}
\input{Objects/jets.tex}

\subsection{Photons}
\label{sec:photons}
\input{Objects/photons.tex}
